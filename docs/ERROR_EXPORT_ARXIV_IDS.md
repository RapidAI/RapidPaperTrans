# 导出错误 arXiv ID 列表功能

## 功能概述

新增了导出错误论文 arXiv ID 列表的功能，可以将所有错误的论文 ID 导出到一个简单的文本文件中，每行一个 ID。

## 使用方法

### 通过界面导出

1. 点击主界面的"错误管理"按钮打开错误列表
2. 在错误管理对话框底部，有两个导出按钮：
   - **📤 导出详细报告**：导出包含完整错误信息的详细报告
   - **📋 导出 ID 列表**：导出只包含 arXiv ID 的简单列表（每行一个 ID）
3. 点击"📋 导出 ID 列表"按钮
4. 选择保存位置和文件名
5. 文件将被保存为纯文本格式

### 导出文件格式

导出的文件格式非常简单，每行一个 arXiv ID：

```
2501.17161
2504.04365
2507.12345
```

这种格式便于：
- 批量处理
- 脚本读取
- 复制粘贴到其他工具

## 技术实现

### 后端 API

新增了 `ExportErrorIDsToFile()` 方法：

```go
// App.go
func (a *App) ExportErrorIDsToFile() (string, error)
```

该方法会：
1. 检查错误管理器是否初始化
2. 获取所有错误记录
3. 显示文件保存对话框
4. 调用 ErrorManager 的 ExportErrorIDs 方法
5. 返回保存的文件路径

### ErrorManager 方法

```go
// internal/errors/manager.go
func (em *ErrorManager) ExportErrorIDs(outputPath string) error
```

该方法会：
1. 收集所有错误记录的 ID
2. 将每个 ID 写入文件的单独一行
3. 如果没有错误，创建空文件

### 前端集成

- 在 `errors.js` 中添加了 `handleExportErrorIDs()` 函数
- 在 `main.js` 中添加了 `ExportErrorIDsToFile` 绑定
- 在 `index.html` 中添加了新的导出按钮

## 测试

添加了完整的单元测试：

```bash
cd latex-translator
go test -v ./internal/errors/
```

测试覆盖：
- ✅ 导出多个错误 ID
- ✅ 验证文件格式（每行一个 ID）
- ✅ 导出空列表（创建空文件）

## 使用场景

1. **批量重试**：导出错误 ID 列表后，可以编写脚本批量重试这些论文
2. **问题追踪**：将错误 ID 列表提交到问题跟踪系统
3. **数据分析**：分析哪些论文容易出错
4. **手动处理**：将 ID 列表用于手动下载或处理

## 与详细报告的区别

| 功能 | 详细报告 | ID 列表 |
|------|---------|---------|
| 包含错误详情 | ✅ | ❌ |
| 包含时间戳 | ✅ | ❌ |
| 包含重试次数 | ✅ | ❌ |
| 易于脚本处理 | ❌ | ✅ |
| 文件大小 | 大 | 小 |
| 适合人工阅读 | ✅ | ❌ |
| 适合批量处理 | ❌ | ✅ |

## 更新日期

2026-01-28
